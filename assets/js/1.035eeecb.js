(window.webpackJsonp=window.webpackJsonp||[]).push([[1,2],{258:function(t,e,i){"use strict";function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i.d(e,"a",(function(){return o}));i(92);function n(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===s(e)?e:String(e)}function o(t,e,i){return(e=n(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},280:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return l}));var s=i(258),n=0;function o(){return n+=1,`ambiki-${Math.random().toString().slice(2,6)}-${n}`}function a(t){return!t.hasAttribute("disabled")&&"true"!==t.getAttribute("aria-disabled")}var r=!!navigator.userAgent.match(/Macintosh/),l=class{constructor(t,e,{multiple:i=!1}={}){Object(s.a)(this,"input",void 0),Object(s.a)(this,"list",void 0),Object(s.a)(this,"multiple",void 0),Object(s.a)(this,"isMouseMoving",!1),this.input=t,this.list=e,this.multiple=i,this.list.id||(this.list.id=o()),this.input.getAttribute("aria-expanded")||this.input.setAttribute("aria-expanded","false"),this.multiple&&this.input.setAttribute("aria-multiselectable","true"),this.input.setAttribute("role","combobox"),this.input.setAttribute("aria-haspopup","listbox"),this.input.setAttribute("aria-autocomplete","list"),this.list.setAttribute("role","listbox"),this.onKeydown=this.onKeydown.bind(this),this.onClick=this.onClick.bind(this),this.onListMouseover=this.onListMouseover.bind(this),this.onListMousemove=this.onListMousemove.bind(this)}start(){this.isMouseMoving=!1,this.input.setAttribute("aria-expanded","true"),this.input.setAttribute("aria-controls",this.list.id),this.input.addEventListener("keydown",this.onKeydown),this.list.addEventListener("click",this.onClick),this.list.addEventListener("mouseover",this.onListMouseover),this.list.addEventListener("mousemove",this.onListMousemove),this.initializeOptions()}stop(){this.isMouseMoving=!1,this.input.setAttribute("aria-expanded","false"),this.input.removeAttribute("aria-controls"),this.input.removeEventListener("keydown",this.onKeydown),this.list.removeEventListener("click",this.onClick),this.list.removeEventListener("mouseover",this.onListMouseover),this.list.removeEventListener("mousemove",this.onListMousemove),this.deselectAll(),this.deactivate()}onKeydown(t){if(this.isMouseMoving=!1,!(t.shiftKey||t.metaKey||t.altKey)&&(r||!t.ctrlKey))switch(t.key){case"Enter":case"Tab":if(!this.activeOption||!a(this.activeOption))break;t.preventDefault(),t.stopPropagation(),this.activeOption.click();break;case"Escape":this.deactivate();break;case"ArrowDown":t.preventDefault(),t.stopPropagation(),this.activeOption?this.move(1):this.activate(this.visibleOptions[0],{scroll:!0});break;case"ArrowUp":t.preventDefault(),t.stopPropagation(),this.activeOption?this.move(-1):this.activate(this.visibleOptions[this.visibleOptions.length-1],{scroll:!0});break;case"Home":t.preventDefault(),t.stopPropagation(),this.activate(this.visibleOptions[0],{scroll:!0});break;case"End":t.preventDefault(),t.stopPropagation(),this.activate(this.visibleOptions[this.visibleOptions.length-1],{scroll:!0});break;default:if(t.ctrlKey)break;this.deactivate()}}onClick(t){let e=c(t.target);!e||!a(e)||(this.multiple&&this.isSelected(e)?this.deselect(e):this.select(e),e.dispatchEvent(new CustomEvent("combobox:commit",{bubbles:!0})))}onListMouseover(t){if(!this.isMouseMoving)return void t.preventDefault();let e=c(t.target);!e||this.activate(e)}onListMousemove(t){if(this.isMouseMoving)return;this.isMouseMoving=!0;let e=c(t.target);!e||this.activate(e)}select(t){if(this.multiple)t.setAttribute("aria-selected","true");else for(let e of this.options)e.setAttribute("aria-selected",(e===t).toString())}deselect(t){t.setAttribute("aria-selected","false")}deselectAll(){for(let t of this.options)this.deselect(t)}activate(t,{scroll:e=!1}={}){for(let i of this.options)i.id===t.id?(i.setAttribute("data-active",""),this.input.setAttribute("aria-activedescendant",i.id),e&&i.scrollIntoView({block:"nearest"})):i.removeAttribute("data-active")}deactivate(){this.input.removeAttribute("aria-activedescendant");for(let t of Array.from(this.list.querySelectorAll('[role="option"][data-active]')))t.removeAttribute("data-active")}isSelected(t){return"true"===t.getAttribute("aria-selected")}get options(){return Array.from(this.list.querySelectorAll('[role="option"]'))}get visibleOptions(){return this.options.filter(h)}get activeOption(){return this.list.querySelector("[data-active]")}move(t){if(!this.activeOption)return;let e=function(t,e,i){let s=t.indexOf(e);s===t.length-1&&1===i&&(s=-1);let n=1===i?0:t.length-1;if(e&&s>=0){let e=s+i;e>=0&&e<t.length&&(n=e)}return t[n]}(this.visibleOptions,this.activeOption,t);this.activate(e,{scroll:!0})}initializeOptions(){for(let t of this.options)t.setAttribute("tabindex","-1"),t.id||(t.id=o()),t.hasAttribute("aria-selected")||this.deselect(t)}};function c(t){if(!t)return!1;return t.closest('[role="option"]')||!1}function h(t){return!t.hidden&&!(t instanceof HTMLInputElement&&"hidden"===t.type)&&(t.offsetWidth>0||t.offsetHeight>0)}},304:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return p}));var s=i(258),n=(i(92),i(280));function o(t,e,i={}){return t.dispatchEvent(new CustomEvent("auto-complete:"+e,{bubbles:!0,...i}))}function a(t){return t.getAttribute("value")||""}function r(t){return t.getAttribute("data-label")||t.innerText.trim()}var l=class{constructor(t,e,i){Object(s.a)(this,"container",void 0),Object(s.a)(this,"autocomplete",void 0),Object(s.a)(this,"input",void 0),this.container=t,this.autocomplete=e,this.input=i}initialize(){}destroy(){}connect(){}disconnect(){}getValue(t){return a(t)}getLabel(t){return r(t)}},c=class extends l{initialize(){!this.container.label&&this.selectedOption&&(this.container.label=this.getLabel(this.selectedOption)),this.input.value=this.container.label}connect(){this.identifySelectionState()}disconnect(){this.input.value!==this.container.label&&(this.input.value=this.container.label)}destroy(){this.removeValue()}onCommit(t){let e=this.getValue(t),i=this.getLabel(t);this.container.value=e,this.container.label=i,this.input.value=i,this.container.open=!1,o(this.container,"select",{detail:{option:t,value:e,label:i}})}setValue(t){let e=t[0];if(!e)return void this.removeValue();this.container.value=e.value.toString();let i=this.selectedOption,s=e.label||(i?this.getLabel(i):"");this.container.label=s,this.input.value=s}removeValue(){this.container.value="",this.container.label="",this.input.value=""}identifySelectionState(){!this.selectedOption||this.autocomplete.combobox.select(this.selectedOption)}get firstActiveOption(){return this.autocomplete.visibleOptions.find(t=>this.maySelect(t))||this.autocomplete.visibleOptions[0]}maySelect(t){return!!this.selectedValue&&this.getValue(t)===this.selectedValue}get selectedValue(){return this.container.value}get selectedOption(){return this.autocomplete.options.find(t=>this.maySelect(t))}},h=class extends l{constructor(...t){super(...t),Object(s.a)(this,"selectedValues",void 0)}initialize(){this.selectedValues=new Set([...u(this.container.value)])}connect(){this.identifySelectionState()}disconnect(){this.clearInput()}destroy(){this.selectedValues.clear(),this.updateContainerWithSelectedValues()}async onCommit(t){this.clearInput();let e=this.getValue(t),i=this.getLabel(t),s={option:t,value:e,label:i};this.selectedValues.has(e)?(this.removeValue(e),o(this.container,"deselect",{detail:s})):(this.setValue([{value:e}]),o(this.container,"select",{detail:s})),await this.autocomplete.fetchOptions(),await new Promise(requestAnimationFrame);let n=this.autocomplete.visibleOptions.find(e=>e.id===t.id)||this.autocomplete.visibleOptions[0];n&&this.autocomplete.activate(n,{scroll:!0})}setValue(t){if(0!==t.length){for(let e of t)this.selectedValues.add(e.value.toString());this.updateContainerWithSelectedValues()}else this.destroy()}removeValue(t){!this.selectedValues.has(t)||(this.selectedValues.delete(t),this.updateContainerWithSelectedValues())}identifySelectionState(){for(let t of this.autocomplete.options)this.selectedValues.has(this.getValue(t))?this.autocomplete.combobox.select(t):this.autocomplete.combobox.deselect(t)}get firstActiveOption(){return this.autocomplete.visibleOptions.find(t=>this.selectedValues.has(this.getValue(t)))||this.autocomplete.visibleOptions[0]}updateContainerWithSelectedValues(){let t=Array.from(this.selectedValues.values());this.container.value=JSON.stringify(t)}clearInput(){this.input.value&&(this.input.value="")}};function u(t){try{return JSON.parse(t).map(t=>t.toString())}catch{return[]}}var d="data-empty";var p=class extends HTMLElement{constructor(...t){super(...t),Object(s.a)(this,"autocomplete",void 0)}connectedCallback(){let t=this.querySelector('input:not([type="hidden"])'),e=this.getAttribute("for");if(!e)return;let i=document.getElementById(e);!(t instanceof HTMLElement)||!i||(this.autocomplete=new class{constructor(t,e,i){var o;Object(s.a)(this,"container",void 0),Object(s.a)(this,"input",void 0),Object(s.a)(this,"list",void 0),Object(s.a)(this,"combobox",void 0),Object(s.a)(this,"clearButton",void 0),Object(s.a)(this,"initialClickTarget",void 0),Object(s.a)(this,"selectionVariant",void 0),Object(s.a)(this,"controller",void 0),Object(s.a)(this,"currentQuery",void 0),Object(s.a)(this,"shouldFetch",!0),this.container=t,this.input=e,this.list=i,this.combobox=new n.default(this.input,this.list,{multiple:this.container.multiple}),this.selectionVariant=this.container.multiple?new h(this.container,this,this.input):new c(this.container,this,this.input),this.selectionVariant.initialize(),this.input.setAttribute("spellcheck","false"),this.input.setAttribute("autocomplete","off"),this.list.setAttribute("tabindex","-1"),this.list.setAttribute("aria-orientation","vertical"),this.clearButton=this.container.querySelector("[data-clear]"),this.clearButton&&!this.clearButton.hasAttribute("aria-label")&&this.clearButton.setAttribute("aria-label","Clear autocomplete"),this.onMousedown=this.onMousedown.bind(this),this.onInputBlur=this.onInputBlur.bind(this),this.onInputMousedown=this.onInputMousedown.bind(this),this.onInput=function(t,e=0){let i;return function(...s){clearTimeout(i),i=window.setTimeout(()=>{clearTimeout(i),t(...s)},e)}}(this.onInput.bind(this),300),this.onCommit=this.onCommit.bind(this),this.onKeydown=this.onKeydown.bind(this),this.onClear=this.onClear.bind(this),this.onDocumentMousedown=this.onDocumentMousedown.bind(this),this.onDocumentClick=this.onDocumentClick.bind(this),this.container.addEventListener("mousedown",this.onMousedown),this.input.addEventListener("blur",this.onInputBlur),this.input.addEventListener("mousedown",this.onInputMousedown),this.input.addEventListener("input",this.onInput),this.input.addEventListener("keydown",this.onKeydown),this.list.addEventListener("combobox:commit",this.onCommit),null!==(o=this.clearButton)&&void 0!==o&&o.addEventListener("click",this.onClear),document.addEventListener("mousedown",this.onDocumentMousedown,!0),document.addEventListener("click",this.onDocumentClick,!0)}destroy(){var t;this.hideList(),this.selectionVariant.destroy(),this.container.removeEventListener("mousedown",this.onMousedown),this.input.removeEventListener("blur",this.onInputBlur),this.input.removeEventListener("mousedown",this.onInputMousedown),this.input.removeEventListener("input",this.onInput),this.input.removeEventListener("keydown",this.onKeydown),this.list.removeEventListener("combobox:commit",this.onCommit),null!==(t=this.clearButton)&&void 0!==t&&t.removeEventListener("click",this.onClear),document.removeEventListener("mousedown",this.onDocumentMousedown,!0),document.removeEventListener("click",this.onDocumentClick,!0)}setValue(t){if(this.selectionVariant.setValue(t),!this.container.open)return;if(0===t.length)return void this.combobox.deselectAll();let e=(i=t,Array.isArray(i)?i:[i]).map(t=>t.value.toString());var i;for(let t of this.options.filter(t=>e.includes(a(t))))this.combobox.select(t)}removeValue(t){this.selectionVariant.removeValue(t);let e=this.options.find(e=>a(e)===t);!e||this.combobox.deselect(e)}activate(t,{scroll:e=!1}={}){this.combobox.activate(t,{scroll:e})}deactivate(){this.combobox.deactivate()}clear(){this.currentQuery=void 0,this.selectionVariant.destroy(),this.container.open=!1}async showList(){!this.list.hidden||(o(this.container,"show"),this.combobox.start(),this.shouldFetch&&await this.fetchOptions(),this.selectionVariant.connect(),this.list.hidden=!1,this.selectionVariant.firstActiveOption&&this.activate(this.selectionVariant.firstActiveOption,{scroll:!0}),o(this.container,"shown"))}hideList(){this.list.hidden||(o(this.container,"hide"),this.shouldFetch=!0,this.currentQuery=void 0,this.combobox.stop(),this.list.removeAttribute(d),this.selectionVariant.disconnect(),this.list.hidden=!0,o(this.container,"hidden"))}get options(){return this.combobox.options}get visibleOptions(){return Array.from(this.list.querySelectorAll('[role="option"]:not([hidden])'))}get activeOption(){return this.combobox.activeOption}onDocumentMousedown(t){var e,i;this.container.open&&(this.initialClickTarget=(null===(e=t.composedPath)||void 0===e||null===(i=e.call(t))||void 0===i?void 0:i[0])||t.target)}onDocumentClick(t){!this.initialClickTarget||!this.container.open||(function(t,e,i,s){if(t.defaultPrevented)return;let n=(a=i,Array.isArray(a)?a:[a]),o=e(t);var a;if(o&&o.getRootNode().contains(o)){for(let e of n)if(null!==e&&(e.contains(o)||t.composed&&t.composedPath().includes(e)))return;s(t,o)}}(t,()=>this.initialClickTarget,[this.container,this.list],()=>{this.container.open=!1}),this.initialClickTarget=void 0)}onMousedown(t){t.target!==this.input&&t.preventDefault()}onInputBlur(){this.container.open=!1,this.initialClickTarget=void 0}onInputMousedown(){this.container.open=!0}async onCommit(t){let e=t.target;var i;!(e instanceof HTMLElement)||((i=e).hasAttribute("disabled")||"true"===i.getAttribute("aria-disabled"))||(await this.selectionVariant.onCommit(e),o(this.container,"commit",{detail:{option:e,value:a(e),label:r(e)}}))}onKeydown(t){switch(this.shouldFetch=!0,t.key){case"Escape":this.container.open&&(t.preventDefault(),t.stopPropagation(),this.container.open=!1);break;case"ArrowDown":t.altKey&&!this.container.open&&(t.preventDefault(),t.stopPropagation(),this.container.open=!0);break;case"ArrowUp":t.altKey&&this.container.open&&(t.preventDefault(),t.stopPropagation(),this.container.open=!1)}}onClear(t){t.preventDefault(),this.clear(),this.input.focus(),o(this.container,"clear")}async onInput(t){let e=t.target.value.trim();await this.fetchOptions(e),this.visibleOptions[0]&&this.activate(this.visibleOptions[0]),this.container.open=!0}async fetchOptions(t=""){if(this.currentQuery===t)return;if(this.currentQuery=t,this.shouldFetch=!1,!this.container.src)return this.options.forEach(function(t,{matching:e}){return i=>{if(t){var s;let n=null===(s=i.getAttribute(e)||i.textContent)||void 0===s?void 0:s.toLowerCase().includes(t.toLowerCase());i.hidden=!n}else i.hidden=!1}}(t,{matching:"data-label"})),this.checkIfListIsEmpty(),void this.selectionVariant.connect();this.controller?this.controller.abort():(this.container.setAttribute("loading",""),o(this.container,"loadstart")),this.controller="AbortController"in window?new AbortController:{signal:null,abort(){}};let e=new URL(this.container.src,window.location.href),i=new URLSearchParams(e.search.slice(1));i.append(this.container.param,t),e.search=i.toString();try{let t=await fetch(e.toString(),{signal:this.controller.signal,credentials:"same-origin",headers:{accept:"text/fragment+html"}});this.list.innerHTML=await t.text(),this.checkIfListIsEmpty(),this.combobox.initializeOptions(),this.selectionVariant.connect(),this.container.removeAttribute("loading"),o(this.container,"success"),o(this.container,"loadend"),this.controller=void 0}catch(t){t instanceof Error&&"AbortError"!==t.name&&(this.container.removeAttribute("loading"),o(this.container,"error"),o(this.container,"loadend"),this.controller=void 0)}}checkIfListIsEmpty(){this.list.toggleAttribute(d,0===this.visibleOptions.length)}}(this,t,i))}static get observedAttributes(){return["open"]}attributeChangedCallback(t,e,i){if(e!==i&&this.autocomplete)switch(t){case"open":null===i?this.autocomplete.hideList():this.autocomplete.showList()}}disconnectedCallback(){var t;null===(t=this.autocomplete)||void 0===t||t.destroy()}get value(){return this.getAttribute("value")||""}set value(t){t&&"[]"!==t?this.setAttribute("value",t):this.removeAttribute("value")}get label(){return this.getAttribute("data-label")||""}set label(t){t?this.setAttribute("data-label",t):this.removeAttribute("data-label")}get open(){return this.hasAttribute("open")}set open(t){t?this.setAttribute("open",""):this.removeAttribute("open")}get multiple(){return this.hasAttribute("multiple")}set multiple(t){t?this.setAttribute("multiple",""):this.removeAttribute("multiple")}get src(){return this.getAttribute("src")||""}set src(t){this.setAttribute("src",t)}get param(){return this.getAttribute("param")||"q"}set param(t){this.setAttribute("param",t)}};window.customElements.get("auto-complete")||(window.AutoCompleteElement=p,window.customElements.define("auto-complete",p))}}]);